{
  "name": "rseqc",
  "title": "RNA-Seq Quality Control",
  "summary": "Generates QC metrics for RNA-Seq data using the RSeQC suite of tools (a graphical report of these metrics can be viewed on the DNAnexus website)",
  "categories": ["RNA-Seq", "Reports", "Statistics"],
  "dxapi": "1.0.0",
  "inputSpec": [
    {
      "name": "mappings",
      "label": "RNA-Seq Mappings",
      "class": "file", 
      "patterns": ["*.bam"], 
      "help": "A BAM file containing the RNA-Seq mappings for which metrics will be calculated" 
    },
    {
      "name": "gene_model", 
      "class": "file", 
      "label": "BED Gene Model", 
      "patterns": ["*.bed"],
      "help": "A BED file containing the gene model that the report will be generated against"
    },
    {
      "name": "contaminants", 
      "label":"Contaminants", 
      "class": "array:file",
      "patterns": ["*.bwa-index.tar.gz"],
      "optional": true, 
      "help": "An array of one or more FASTA files representing contaminant sequences. These files must be indexed for BWA using the BWA FASTA Indexer app.",
      "suggestions": [
        {
          "name": "DNAnexus Reference Genomes",
          "project": "project-BQpp3Y804Y0xbyG4GJPQ01xv",
          "path": "/"
        }
      ] 
    },
    {
      "name": "original_reads", 
      "label":"Original Reads", 
      "class": "array:file", 
      "optional": true, 
      "help": "The original reads (FASTQ files) that the RNA-Seq mappings were generated from (required only if contaminant sequences are given -- contamination will be checked by aligning the original reads to the contaminant sequences).",
      "patterns": ["*.fq.gz", "*.fastq.gz"]
    }
  ],
  "outputSpec": [
    {
      "name": "report", 
      "label": "Report", 
      "class": "record", 
      "type": "Report", 
      "help": "The resulting QC report"
    }
  ],
  "runSpec": {
    "file": "RSeQC.py",
    "interpreter": "python2.7",
    "execDepends": [{"name": "python-numpy"}],
    "buildDepends": [{"name": "libncurses5-dev"}],
    "systemRequirements": {"read_distribution": {"instanceType":"mem3_ssd1_x8"}, 
                           "inner_distance": {"instanceType":"mem3_ssd1_x8"},
                           "read_duplication": {"instanceType":"mem3_ssd1_x8"}}
  },
  "version": "1.1.4",
  "details":{
    "upstreamAuthor": "Liguo Wang, Shengqin Wang, and Wei Li",
    "upstreamVersion": "2.3.3",
    "upstreamUrl": "http://code.google.com/p/rseqc/",
    "upstreamLicencses": ["GNU GLP v3"],
    "citations": ["doi:10.1093/bioinformatics/bts356"]
  }
}
